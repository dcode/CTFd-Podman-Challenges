{% extends 'admin/base.html' %}
{% block content %}
<div class="jumbotron">
    <div class="container">
        <h1>Podman Config</h1>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            {% for error in errors %}
            <div class="alert alert-danger alert-dismissable" role="alert">
                <span class="sr-only">Error:</span>
                {{ error }}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
            </div>
            {% endfor %}
            <form method="post" accept-charset="utf-8" autocomplete="off" role="form" name='podman_config' class="form-horizontal" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="uri-input">
                        Podman Connection URI
                    </label>
                    {% if config.uri %}
                    <input class="form-control" type="text" name="uri" id="uri-input" placeholder="Ex: unix:///run/podman/podman.sock" value='{{ config.uri }}'/>
                    {% else %}
                    <input class="form-control" type="text" name="uri" id="uri-input" placeholder="Ex: unix:///run/podman/podman.sock" />
                    {% endif %}
                </div>
                <div class="form-group">
                    <label for="identity-input">
                        SSH Identity File Path (optional)
                    </label>
                    {% if config.identity %}
                    <input class="form-control" type="text" name="identity" id="identity-input" placeholder="Ex: ~/.ssh/id_rsa" value='{{ config.identity }}'/>
                    {% else %}
                    <input class="form-control" type="text" name="identity" id="identity-input" placeholder="Ex: ~/.ssh/id_rsa" />
                    {% endif %}
                </div>
                <div class="form-group">
                    <label for="identity-input">
                        Connection Entry (optional)
                    </label>
                    {% if config.connection %}
                    <input class="form-control" type="text" name="connection" id="connection-input" placeholder="Ex: ~/.ssh/id_rsa" value='{{ config.connection }}'/>
                    {% else %}
                    <input class="form-control" type="text" name="connection" id="connection-input" placeholder="Ex: ~/.ssh/id_rsa" />
                    {% endif %}
                </div>
                <div class="form-group">
                    <label for="repo-ms">
                        Repositories
                    </label>
                    <select id='repositories' name="repositories" class='form-control' size='10' multiple>
                        {% if form.repositories.choices[0][0] == "ERROR" %}
                            <option value='False' disabled>{{ form.repositories.choices[0][1] }}</option>
                        {% elif form.repositories %}
                            {% for key,value in form.repositories.choices %}
                                {% if key in repos %}
                                <option value='{{ key }}' selected>{{ value }}</option>
                                {% else %}
                                <option value='{{ key }}'>{{ value }}</option>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <option value='False' disabled>Connect Podman API First</option>
                        {% endif %}
                    </select>
                </div>
                {{ form.nonce() }}
                <div class="col-md-13 text-center">
                    <button type="submit" tabindex="0" class="btn btn-md btn-primary btn-outlined">
                        Submit
                    </button>
                </div>
        </div>
        <input type="hidden" name="id" value="1">
        </form>
    </div>
</div>
{% endblock content %}
